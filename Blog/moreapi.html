<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Morrrrre...GameAPIs | 潇淼文档</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bcbe8dcd550616b188183a023ba3e682";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
    <meta name="description" content="MiniDoc">
    <meta name="robots" content="all">
    <meta name="author" content="msk11@qq.com">
    <meta name="copyright" content="Hcat">
    <meta name="revisit-after" content="7 days">
    <meta name="keywords" content="潇淼文档,潇淼,迷你世界,文档,迷你,mini,doc,世界,MiniWorld,脚本,教程">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <link rel="preload" href="/assets/css/0.styles.84203ac8.css" as="style"><link rel="preload" href="/assets/js/app.ef735673.js" as="script"><link rel="preload" href="/assets/js/2.b51029ec.js" as="script"><link rel="preload" href="/assets/js/22.1d33cf5f.js" as="script"><link rel="prefetch" href="/assets/js/10.08f53c0a.js"><link rel="prefetch" href="/assets/js/11.852fe533.js"><link rel="prefetch" href="/assets/js/12.387441d1.js"><link rel="prefetch" href="/assets/js/13.026b2d2d.js"><link rel="prefetch" href="/assets/js/14.234e0442.js"><link rel="prefetch" href="/assets/js/15.05982601.js"><link rel="prefetch" href="/assets/js/16.6ddb7b54.js"><link rel="prefetch" href="/assets/js/17.c8e27348.js"><link rel="prefetch" href="/assets/js/18.bea8b7b8.js"><link rel="prefetch" href="/assets/js/19.8032166c.js"><link rel="prefetch" href="/assets/js/20.e8575946.js"><link rel="prefetch" href="/assets/js/21.78fb8e90.js"><link rel="prefetch" href="/assets/js/23.7b04bc71.js"><link rel="prefetch" href="/assets/js/24.e2b60efb.js"><link rel="prefetch" href="/assets/js/25.5d5a4485.js"><link rel="prefetch" href="/assets/js/26.8173389b.js"><link rel="prefetch" href="/assets/js/27.b71f4454.js"><link rel="prefetch" href="/assets/js/28.e1ca4b97.js"><link rel="prefetch" href="/assets/js/29.929be50a.js"><link rel="prefetch" href="/assets/js/3.df829fda.js"><link rel="prefetch" href="/assets/js/30.7e96e268.js"><link rel="prefetch" href="/assets/js/31.c0e69237.js"><link rel="prefetch" href="/assets/js/32.7a31538c.js"><link rel="prefetch" href="/assets/js/33.9f9fcbee.js"><link rel="prefetch" href="/assets/js/34.1a23bcc8.js"><link rel="prefetch" href="/assets/js/35.d646c169.js"><link rel="prefetch" href="/assets/js/36.23fde348.js"><link rel="prefetch" href="/assets/js/37.72568f5d.js"><link rel="prefetch" href="/assets/js/38.c16df410.js"><link rel="prefetch" href="/assets/js/39.beaf8a5b.js"><link rel="prefetch" href="/assets/js/4.af196e2c.js"><link rel="prefetch" href="/assets/js/40.a6c3be0f.js"><link rel="prefetch" href="/assets/js/41.55dcf4c0.js"><link rel="prefetch" href="/assets/js/42.194c1906.js"><link rel="prefetch" href="/assets/js/43.23218e8b.js"><link rel="prefetch" href="/assets/js/44.d7674f0c.js"><link rel="prefetch" href="/assets/js/45.98b149c7.js"><link rel="prefetch" href="/assets/js/46.b5d5ec9d.js"><link rel="prefetch" href="/assets/js/47.b3a38716.js"><link rel="prefetch" href="/assets/js/48.ea0a7e3f.js"><link rel="prefetch" href="/assets/js/5.18feaa6c.js"><link rel="prefetch" href="/assets/js/6.7e6925c7.js"><link rel="prefetch" href="/assets/js/7.1b7a5d04.js"><link rel="prefetch" href="/assets/js/8.f363ac78.js"><link rel="prefetch" href="/assets/js/9.61f6ba62.js">
    <link rel="stylesheet" href="/assets/css/0.styles.84203ac8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">潇淼文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/Hcat.html" class="nav-link">
  联系我们
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="http://xor.hcat.work/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XOR加密
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/Hcat.html" class="nav-link">
  联系我们
</a></div><div class="nav-item"><a href="/about.html" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="http://xor.hcat.work/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XOR加密
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">首页</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基本要素</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lua脚本</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>拓展元素</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/AboutBlockData.html" class="sidebar-link">关于方块Data</a></li><li><a href="/Blog/AboutHideBlock.html" class="sidebar-link">部分隐藏ID</a></li><li><a href="/Blog/MiniWorldDirectoryStructure.html" class="sidebar-link">MiniWorld存档目录结构</a></li><li><a href="/Blog/moreapi.html" aria-current="page" class="active sidebar-link">Morrrrre...GameAPIs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#setgamedefeat" class="sidebar-link">setGameDefeat</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#setweather" class="sidebar-link">setWeather</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#notifygameinfo2self" class="sidebar-link">notifyGameInfo2Self</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#trigger-player-setplayerattr" class="sidebar-link">Trigger.Player:setPlayerAttr</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#trigger-buff-addbuff" class="sidebar-link">Trigger.Buff:addBuff</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#trigger-creature-killactor" class="sidebar-link">Trigger.Creature:killActor</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#trigger-creature-removeactor" class="sidebar-link">Trigger.Creature:removeActor</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#trigger-item-createprojectile" class="sidebar-link">Trigger.Item:createProjectile</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#trigger-creature-setattribute" class="sidebar-link">Trigger.Creature:setAttribute</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#threadpool-work" class="sidebar-link">threadpool:work</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#trigger-player-killplayer" class="sidebar-link">Trigger.Player:killPlayer()</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#stop" class="sidebar-link">stop</a></li></ul></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#clientmgr" class="sidebar-link">ClientMgr</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#playmusic" class="sidebar-link">playMusic</a></li></ul></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#scriptsupportctrl" class="sidebar-link">ScriptSupportCtrl</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#getcurowid" class="sidebar-link">getCurOwid</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#客户端管理" class="sidebar-link">客户端管理</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#当前世界" class="sidebar-link">当前世界</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#世界管理" class="sidebar-link">世界管理</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#客户端当前游戏" class="sidebar-link">客户端当前游戏</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#账号管理" class="sidebar-link">账号管理</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#线程池" class="sidebar-link">线程池</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#脚本支持组件" class="sidebar-link">脚本支持组件</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#模组管理" class="sidebar-link">模组管理</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#lua接口" class="sidebar-link">Lua接口</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#界面" class="sidebar-link">界面</a></li><li class="sidebar-sub-header"><a href="/Blog/moreapi.html#玩家" class="sidebar-link">玩家</a></li></ul></li></ul></li><li><a href="/Blog/AboutAntiCheat.html" class="sidebar-link">MiniWorld AntiCheatServer BinReverse Research by Hcat</a></li><li><a href="/Blog/qs.html" class="sidebar-link">常见问题</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>商业化[圈钱]</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>游戏全局数据表</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="morrrrre-gameapis"><a href="#morrrrre-gameapis" class="header-anchor">#</a> Morrrrre...GameAPIs</h1> <p>基于某未发行版本泄露部分源码，提供一些内部api</p> <h1 id="触发器"><a href="#触发器" class="header-anchor">#</a> 触发器</h1> <h2 id="setgamedefeat"><a href="#setgamedefeat" class="header-anchor">#</a> setGameDefeat</h2> <ul><li>参数及类型：
<ul><li>uin:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>返回值及类型：
<ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li>该方法的主要作用：移除玩家</li> <li>具体使用案例如下：</li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code>ScriptSupportEvent<span class="token punctuation">:</span><span class="token function">registerEvent</span><span class="token punctuation">(</span>
    <span class="token string">[=[Player.ClickBlock]=]</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Player<span class="token punctuation">:</span><span class="token function">setGameDefeat</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="setweather"><a href="#setweather" class="header-anchor">#</a> setWeather</h2> <ul><li>参数及类型：
<ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  0晴雨交错 1晴天 2 雨天</li></ul></li> <li>返回值及类型：
<ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li>该方法的主要作用：设置天气</li> <li>具体使用案例如下：</li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code>ScriptSupportEvent<span class="token punctuation">:</span><span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token string">[=[Player.ClickBlock]=]</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token keyword">local</span> v1 <span class="token operator">=</span> <span class="token number">0</span>
       Trigger<span class="token punctuation">.</span>World<span class="token punctuation">:</span><span class="token function">setWeather</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="notifygameinfo2self"><a href="#notifygameinfo2self" class="header-anchor">#</a> notifyGameInfo2Self</h2> <ul><li><p>参数及类型：</p> <ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>v2:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>string</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：显示飘窗信息</p></li> <li><p>具体使用案例如下：</p></li></ul> <p>Trigger.PlayerGroup:notifyGameInfo2Self(v1, v2)</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func_a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> Trigger<span class="token punctuation">.</span>World <span class="token keyword">and</span> Trigger<span class="token punctuation">.</span>World<span class="token punctuation">.</span>getAllPlayers <span class="token keyword">then</span>
        <span class="token keyword">return</span> Trigger<span class="token punctuation">.</span>World<span class="token punctuation">:</span><span class="token function">getAllPlayers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func_b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v1 <span class="token operator">=</span> <span class="token function">func_a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v2 <span class="token operator">=</span> <span class="token string">[=[HcatVeryBeautiful]=]</span>
    <span class="token keyword">if</span> logidx <span class="token keyword">then</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> v2<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> v1 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v2 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;-- [func_b] error -- param is nil:&quot;</span><span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> Trigger<span class="token punctuation">.</span>PlayerGroup <span class="token keyword">and</span> Trigger<span class="token punctuation">.</span>PlayerGroup<span class="token punctuation">.</span>notifyGameInfo2Self <span class="token keyword">then</span>
        <span class="token keyword">return</span> Trigger<span class="token punctuation">.</span>PlayerGroup<span class="token punctuation">:</span><span class="token function">notifyGameInfo2Self</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre></div><h2 id="trigger-player-setplayerattr"><a href="#trigger-player-setplayerattr" class="header-anchor">#</a> Trigger.Player:setPlayerAttr</h2> <ul><li><p>参数及类型：</p> <ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>v2:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>v3:</li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：设置玩家属性</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v1 <span class="token operator">=</span> class<span class="token punctuation">.</span>TriggerPlayerVar<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span>CurEventParam<span class="token punctuation">.</span>TriggerByPlayer<span class="token punctuation">,</span> PLAYERATTR<span class="token punctuation">.</span>CUR_HP<span class="token punctuation">)</span><span class="token punctuation">.</span>AttrData
    <span class="token keyword">local</span> v2 <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> v1 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v2 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
        <span class="token keyword">return</span> <span class="token keyword">false</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> <span class="token function">type</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span> <span class="token operator">~=</span> <span class="token function">type</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span> <span class="token keyword">then</span>
        <span class="token keyword">return</span> <span class="token keyword">false</span>
    <span class="token keyword">end</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>v1 <span class="token operator">+</span> v2<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v1 <span class="token operator">=</span> CurEventParam<span class="token punctuation">.</span>TriggerByPlayer
    _exeObjid_ <span class="token operator">=</span> v1
    <span class="token keyword">local</span> v2 <span class="token operator">=</span> PLAYERATTR<span class="token punctuation">.</span>CUR_HP
    <span class="token keyword">local</span> v3 <span class="token operator">=</span> <span class="token function">func_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> logidx <span class="token keyword">then</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> v2<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> v3<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> v1 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v2 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v3 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;-- [func_2] error -- param is nil:&quot;</span><span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> Trigger<span class="token punctuation">.</span>Player <span class="token keyword">and</span> Trigger<span class="token punctuation">.</span>Player<span class="token punctuation">.</span>setPlayerAttr <span class="token keyword">then</span>
        <span class="token keyword">return</span> Trigger<span class="token punctuation">.</span>Player<span class="token punctuation">:</span><span class="token function">setPlayerAttr</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre></div><h2 id="trigger-buff-addbuff"><a href="#trigger-buff-addbuff" class="header-anchor">#</a> Trigger.Buff:addBuff</h2> <ul><li><p>参数及类型：</p> <ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>v2:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>v3:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>boolean</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>v4:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：addBuff</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func_5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v1 <span class="token operator">=</span> CurEventParam<span class="token punctuation">.</span>TriggerByPlayer
    _exeObjid_ <span class="token operator">=</span> v1
    <span class="token keyword">local</span> v2 <span class="token operator">=</span> <span class="token number">208003</span>
    <span class="token keyword">local</span> v3 <span class="token operator">=</span> <span class="token keyword">false</span>
    <span class="token keyword">local</span> v4 <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">if</span> logidx <span class="token keyword">then</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> v2<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> v3<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> v4<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> v1 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v2 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v3 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v4 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;-- [func_5] error -- param is nil:&quot;</span><span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">,</span> v4<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> Trigger<span class="token punctuation">.</span>Buff <span class="token keyword">and</span> Trigger<span class="token punctuation">.</span>Buff<span class="token punctuation">.</span>addBuff <span class="token keyword">then</span>
        <span class="token keyword">return</span> Trigger<span class="token punctuation">.</span>Buff<span class="token punctuation">:</span><span class="token function">addBuff</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">,</span> v4<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>  
</code></pre></div><h2 id="trigger-creature-killactor"><a href="#trigger-creature-killactor" class="header-anchor">#</a> Trigger.Creature:killActor</h2> <ul><li><p>参数及类型：</p> <ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：击杀生物</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code>Trigger<span class="token punctuation">.</span>Creature<span class="token punctuation">:</span><span class="token function">killActor</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>
</code></pre></div><h2 id="trigger-creature-removeactor"><a href="#trigger-creature-removeactor" class="header-anchor">#</a> Trigger.Creature:removeActor</h2> <ul><li><p>参数及类型：</p> <ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：直接删除实体</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">--删除事件中的生物实体</span>
Trigger<span class="token punctuation">.</span>Creature<span class="token punctuation">:</span><span class="token function">removeActor</span><span class="token punctuation">(</span>CurEventParam<span class="token punctuation">.</span>TriggerByCreature<span class="token punctuation">)</span>
</code></pre></div><h2 id="trigger-item-createprojectile"><a href="#trigger-item-createprojectile" class="header-anchor">#</a> Trigger.Item:createProjectile</h2> <ul><li><p>参数及类型：</p> <ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 创建投射物的位置</li> <li>v2: <a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 投掷物ID</li> <li>v3<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 发射到的位置</li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：创建投掷物</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v1 <span class="token operator">=</span> CurEventParam<span class="token punctuation">.</span>EventTargetPos
    <span class="token keyword">local</span> v2 <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">local</span> v3 <span class="token operator">=</span> <span class="token number">20</span>
    <span class="token keyword">local</span> v4 <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">if</span> v1 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v2 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v3 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v4 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;-- [func_2] error -- param is nil:&quot;</span><span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">,</span> v4<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> Trigger<span class="token punctuation">.</span>World <span class="token keyword">and</span> Trigger<span class="token punctuation">.</span>World<span class="token punctuation">.</span>offsetPos <span class="token keyword">then</span>
        <span class="token keyword">return</span> Trigger<span class="token punctuation">.</span>World<span class="token punctuation">:</span><span class="token function">offsetPos</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">,</span> v4<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>


<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func_3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v1 <span class="token operator">=</span> CurEventParam<span class="token punctuation">.</span>TriggerByCreature
    <span class="token keyword">if</span> v1 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;-- [func_3] error -- param is nil:&quot;</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> Trigger<span class="token punctuation">.</span>Creature <span class="token keyword">and</span> Trigger<span class="token punctuation">.</span>Creature<span class="token punctuation">.</span>getPosition <span class="token keyword">then</span>
        <span class="token keyword">return</span> Trigger<span class="token punctuation">.</span>Creature<span class="token punctuation">:</span><span class="token function">getPosition</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>




<span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">func_4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v1 <span class="token operator">=</span> <span class="token function">func_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">local</span> v2 <span class="token operator">=</span> <span class="token number">12285</span>
    <span class="token keyword">local</span> v3 <span class="token operator">=</span> <span class="token function">func_3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> logidx <span class="token keyword">then</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> v1<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> v2<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">ReportActionRunData</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _status_idx_<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> v3<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> v1 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v2 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">or</span> v3 <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;-- [func_4] error -- param is nil:&quot;</span><span class="token punctuation">,</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token keyword">end</span>
    <span class="token keyword">if</span> Trigger<span class="token punctuation">.</span>Item <span class="token keyword">and</span> Trigger<span class="token punctuation">.</span>Item<span class="token punctuation">.</span>createProjectile <span class="token keyword">then</span>
        <span class="token keyword">return</span> Trigger<span class="token punctuation">.</span>Item<span class="token punctuation">:</span><span class="token function">createProjectile</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre></div><h2 id="trigger-creature-setattribute"><a href="#trigger-creature-setattribute" class="header-anchor">#</a> Trigger.Creature:setAttribute</h2> <ul><li><p>参数及类型：</p> <ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>number</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>v2</li> <li>v3</li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：直接删除实体</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">--设置触发事件的生物当前血量为1</span>
    <span class="token keyword">local</span> v1 <span class="token operator">=</span> CurEventParam<span class="token punctuation">.</span>TriggerByCreature
    _exeObjid_ <span class="token operator">=</span> v1
    <span class="token keyword">local</span> v2 <span class="token operator">=</span> CREATUREATTR<span class="token punctuation">.</span>CUR_HP
    <span class="token keyword">local</span> v3 <span class="token operator">=</span> <span class="token number">1</span>

Trigger<span class="token punctuation">.</span>Creature<span class="token punctuation">:</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">)</span>
</code></pre></div><h2 id="threadpool-work"><a href="#threadpool-work" class="header-anchor">#</a> threadpool:work</h2> <ul><li><p>参数及类型：</p> <ul><li>v1:<a href="https://developers.mini1.cn/wiki/global.html#lua%E5%8E%9F%E7%94%9F%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener noreferrer"><strong><code>function</code></strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：多线程工作</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code>    <span class="token keyword">local</span> logidx <span class="token operator">=</span> Trigger <span class="token keyword">and</span> Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">logTriggerBegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> logidx <span class="token keyword">then</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">setTriggerid</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> _triggerid_<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">setTriggerEvent</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> eventidx<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">setTriggerEventParams</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> eventparams<span class="token punctuation">)</span>
        Trigger<span class="token punctuation">.</span>Debug<span class="token punctuation">:</span><span class="token function">setTriggerOtherParams</span><span class="token punctuation">(</span>logidx<span class="token punctuation">,</span> curparams<span class="token punctuation">)</span>
    <span class="token keyword">end</span>

    <span class="token keyword">local</span> curparams <span class="token operator">=</span> CurEventParam <span class="token keyword">and</span> <span class="token function">copy_table</span><span class="token punctuation">(</span>CurEventParam<span class="token punctuation">)</span>
    threadpool<span class="token punctuation">:</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">main</span><span class="token punctuation">(</span>param<span class="token punctuation">,</span> <span class="token keyword">nil</span><span class="token punctuation">,</span> logidx<span class="token punctuation">,</span> curparams<span class="token punctuation">)</span>
    <span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="trigger-player-killplayer"><a href="#trigger-player-killplayer" class="header-anchor">#</a> Trigger.Player:killPlayer()</h2> <ul><li><p>参数及类型：</p> <ul><li>uin:</li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：杀死玩家</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code>Trigger<span class="token punctuation">.</span>Player<span class="token punctuation">:</span><span class="token function">killPlayer</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>eventobjid<span class="token punctuation">)</span>
</code></pre></div><h3 id="stop"><a href="#stop" class="header-anchor">#</a> stop</h3> <ul><li>返回值及类型：
<ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li>该方法的主要作用：释放触发器</li> <li>具体使用案例如下：</li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code>Trigger<span class="token punctuation">:</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="clientmgr"><a href="#clientmgr" class="header-anchor">#</a> ClientMgr</h2> <h3 id="playmusic"><a href="#playmusic" class="header-anchor">#</a> playMusic</h3> <ul><li><p>参数及类型：</p> <ul><li>path:</li></ul></li> <li><p>返回值及类型：</p> <ul><li><a href="https://developers.mini1.cn/wiki/global.html#%E9%94%99%E8%AF%AF%E7%A0%81%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener noreferrer">ErrorCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.OK</li></ul></li> <li><p>该方法的主要作用：播放音乐</p></li> <li><p>具体使用案例如下：</p></li></ul> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientMgr<span class="token punctuation">:</span><span class="token function">playMusic</span><span class="token punctuation">(</span><span class="token function">filepath</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">..</span> <span class="token string">&quot;vardata/MOOD.mp3&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="scriptsupportctrl"><a href="#scriptsupportctrl" class="header-anchor">#</a> ScriptSupportCtrl</h2> <h3 id="getcurowid"><a href="#getcurowid" class="header-anchor">#</a> getCurOwid</h3> <ul><li>返回值及类型：
<ul><li>owid</li></ul></li> <li>该方法的主要作用：取当前owid</li> <li>具体使用案例如下：</li></ul> <h1 id="杂七杂八"><a href="#杂七杂八" class="header-anchor">#</a> 杂七杂八</h1> <p>消息框</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">StoreMsgBox</span><span class="token punctuation">(</span>boxType<span class="token punctuation">,</span> text<span class="token punctuation">,</span> <span class="token function">GetS</span><span class="token punctuation">(</span><span class="token number">609</span><span class="token punctuation">)</span><span class="token punctuation">,</span> costId<span class="token punctuation">,</span> lackMiniNum<span class="token punctuation">,</span> needNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;ZhishuInputTextFrameEdit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">GetText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;CloseAccountFrameEdit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;CloseAccountFrameAgreeBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">Disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;CloseAccountFrameAgreeBtnNormal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">SetGray</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;CloseAccountFrameAgreeBtnPushedBG&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">SetGray</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;DeveloperStoreSkuFrameList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">setDealMsg</span><span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;DeveloperExtractPropFrameNumberNameEdit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">SetText</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token function">IsEnableNewAccountSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">then</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;GameSetFrameOtherCloseAccountTitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">Hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;GameSetFrameOtherCloseAccountBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">Hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;GameSetFrameOtherCloseAccountTitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;GameSetFrameOtherCloseAccountBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">Show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;CloseAccountFrameAgreeBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">Enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;CloseAccountFrameContentText&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">SetText</span><span class="token punctuation">(</span><span class="token function">GetS</span><span class="token punctuation">(</span><span class="token number">9222</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;PlayerExpBarStarBkg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">170</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;PokedexSeriesBox&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">setDealMsg</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;BeanConvertFrameHappyFireworkName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">SetPoint</span><span class="token punctuation">(</span><span class="token string">&quot;topleft&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;BeanConvertFrameHappyFirework&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">195</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;BeanConvertFrameHappyFireworkMiniIcon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">SetTexture</span><span class="token punctuation">(</span><span class="token string">&quot;items/icon12750.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getglobal</span><span class="token punctuation">(</span><span class="token string">&quot;StoreMsgboxFrame&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">SetClientString</span><span class="token punctuation">(</span> <span class="token string">&quot;道具不足前往家园获取&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">SetCurEditBox</span><span class="token punctuation">(</span><span class="token string">&quot;DeveloperExtractPropFrameNumberNameEdit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">HideAllFrame</span><span class="token punctuation">(</span><span class="token string">&quot;PaletteFrame&quot;</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="禁用esc"><a href="#禁用esc" class="header-anchor">#</a> 禁用ESC</h6> <p>_G.IgnoreEsc = true</p> <p>WorldMgr:NoticeRentStatusTime(reason, sec or 0)</p> <h6 id="取字符串资源"><a href="#取字符串资源" class="header-anchor">#</a> 取字符串资源</h6> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">GetS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="游戏提示"><a href="#游戏提示" class="header-anchor">#</a> 游戏提示</h6> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">ShowGameTips</span><span class="token punctuation">(</span><span class="token function">GetS</span><span class="token punctuation">(</span><span class="token number">21673</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="不带过滤器的游戏提示"><a href="#不带过滤器的游戏提示" class="header-anchor">#</a> 不带过滤器的游戏提示</h6> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token function">ShowGameTipsWithoutFilter</span><span class="token punctuation">(</span><span class="token string">&quot;Path:&quot;</span><span class="token operator">..</span>LuaInterface<span class="token punctuation">:</span><span class="token function">getStdioRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="stdioroot"><a href="#stdioroot" class="header-anchor">#</a> StdioRoot</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientMgr<span class="token punctuation">:</span><span class="token function">clickCopy</span><span class="token punctuation">(</span>LuaInterface<span class="token punctuation">:</span><span class="token function">getStdioRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">ShowGameTipsWithoutFilter</span><span class="token punctuation">(</span><span class="token string">&quot;已复制StdioRoot&quot;</span><span class="token punctuation">)</span>
<span class="token comment">-- 返回：C:/Users/Hcat/AppData/Roaming/miniworddata110/</span>
</code></pre></div><h6 id="检查过滤文本"><a href="#检查过滤文本" class="header-anchor">#</a> 检查过滤文本</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>DefMgr<span class="token punctuation">:</span><span class="token function">checkFilterString</span><span class="token punctuation">(</span><span class="token string">&quot;Fuck&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="过滤文本"><a href="#过滤文本" class="header-anchor">#</a> 过滤文本</h6> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> txt <span class="token operator">=</span> DefMgr<span class="token punctuation">:</span><span class="token function">filterString</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="添加过滤文本"><a href="#添加过滤文本" class="header-anchor">#</a> 添加过滤文本</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>DefMgr<span class="token punctuation">:</span><span class="token function">addFilterString</span><span class="token punctuation">(</span>aString<span class="token punctuation">)</span>
</code></pre></div><h6 id="直接过滤文本"><a href="#直接过滤文本" class="header-anchor">#</a> 直接过滤文本</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>DefMgr<span class="token punctuation">:</span><span class="token function">filterStringDirect</span><span class="token punctuation">(</span>LettersTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="客户端管理"><a href="#客户端管理" class="header-anchor">#</a> 客户端管理</h3> <h6 id="取设备id"><a href="#取设备id" class="header-anchor">#</a> 取设备ID</h6> <div class="language- extra-class"><pre class="language-text"><code>ClientMgr:getDeviceID()
</code></pre></div><h6 id="复制到剪贴板"><a href="#复制到剪贴板" class="header-anchor">#</a> 复制到剪贴板</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientMgr<span class="token punctuation">:</span><span class="token function">clickCopy</span><span class="token punctuation">(</span>LuaInterface<span class="token punctuation">:</span><span class="token function">getStdioRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="是否纯净服"><a href="#是否纯净服" class="header-anchor">#</a> 是否纯净服</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientMgr<span class="token punctuation">:</span><span class="token function">isPureServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="取文本格式客户端版本号"><a href="#取文本格式客户端版本号" class="header-anchor">#</a> 取文本格式客户端版本号</h6> <div class="language- extra-class"><pre class="language-text"><code>	local curVersion = ClientMgr:clientVersion();
	t_extra.version = ClientMgr:clientVersionToStr(curVersion);
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>ClientMgr:clientVersion();
</code></pre></div><h6 id="取当前房间相关"><a href="#取当前房间相关" class="header-anchor">#</a> 取当前房间相关</h6> <div class="language- extra-class"><pre class="language-text"><code>	local roomId = ClientMgr:getCurrentRentRoomId()
	local room_uin = ClientMgr:getCurrentRentRoomUin()
</code></pre></div><h6 id="播放音乐"><a href="#播放音乐" class="header-anchor">#</a> 播放音乐</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientMgr<span class="token punctuation">:</span><span class="token function">playMusic</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> loop<span class="token punctuation">)</span><span class="token punctuation">;</span>
ClientMgr<span class="token punctuation">:</span><span class="token function">playMusic</span><span class="token punctuation">(</span><span class="token string">&quot;sounds/music/bgm5.ogg&quot;</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="停止音乐"><a href="#停止音乐" class="header-anchor">#</a> 停止音乐</h6> <div class="language- extra-class"><pre class="language-text"><code>ClientMgr:stopMusic();
</code></pre></div><h6 id="退出游戏-不退出进程"><a href="#退出游戏-不退出进程" class="header-anchor">#</a> 退出游戏，不退出进程</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientMgr<span class="token punctuation">:</span><span class="token function">gotoGame</span><span class="token punctuation">(</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="退出进程"><a href="#退出进程" class="header-anchor">#</a> 退出进程</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientMgr<span class="token punctuation">:</span><span class="token function">gotoGame</span><span class="token punctuation">(</span><span class="token string">&quot;exit&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="回到主菜单"><a href="#回到主菜单" class="header-anchor">#</a> 回到主菜单</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientMgr<span class="token punctuation">:</span><span class="token function">gotoGame</span><span class="token punctuation">(</span><span class="token string">&quot;MainMenuStage&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="播放音效"><a href="#播放音效" class="header-anchor">#</a> 播放音效</h6> <div class="language- extra-class"><pre class="language-text"><code>ClientMgr:playSound2D(&quot;sounds/ui/info/death.ogg&quot;, 1);
</code></pre></div><h6 id="设置sdk浮动菜单"><a href="#设置sdk浮动菜单" class="header-anchor">#</a> 设置Sdk浮动菜单</h6> <div class="language- extra-class"><pre class="language-text"><code>ClientMgr:setSdkFloatMenu(2); -- 1 退出游戏地图; 2 进入游戏地图
</code></pre></div><h3 id="当前世界"><a href="#当前世界" class="header-anchor">#</a> 当前世界</h3> <h6 id="设置游戏规则"><a href="#设置游戏规则" class="header-anchor">#</a> 设置游戏规则</h6> <div class="language- extra-class"><pre class="language-text"><code>CurWorld:setGameRule(ruleId, curOpId, 0);
</code></pre></div><h3 id="世界管理"><a href="#世界管理" class="header-anchor">#</a> 世界管理</h3> <div class="language- extra-class"><pre class="language-text"><code>WorldMgr:setGameRuleValue(ruleId, val)

self.Mini.gamerule.getGameRuleValue(key) 

WorldMgr:setGameRuleValue(GMRULE_BGMUSICMODE, val)

</code></pre></div><h3 id="客户端当前游戏"><a href="#客户端当前游戏" class="header-anchor">#</a> 客户端当前游戏</h3> <h6 id="发送聊天信息"><a href="#发送聊天信息" class="header-anchor">#</a> 发送聊天信息</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ClientCurGame<span class="token punctuation">:</span><span class="token function">sendChat</span><span class="token punctuation">(</span>tipsContent<span class="token punctuation">,</span>tipsType<span class="token punctuation">,</span>tipsUin<span class="token punctuation">)</span>
</code></pre></div><h6 id="见代码"><a href="#见代码" class="header-anchor">#</a> 见代码</h6> <div class="language- extra-class"><pre class="language-text"><code>ClientCurGame:getHostUin();
</code></pre></div><h6 id="见代码-2"><a href="#见代码-2" class="header-anchor">#</a> 见代码</h6> <div class="language- extra-class"><pre class="language-text"><code>ClientCurGame:getMaxPlayerNum();
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code>ClientCurGame<span class="token punctuation">:</span><span class="token function">getNumPlayerBriefInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="设置操作ui"><a href="#设置操作ui" class="header-anchor">#</a> 设置操作UI</h6> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">-- true 鼠标移出游戏 false 捕获鼠标</span>
ClientCurGame<span class="token punctuation">:</span><span class="token function">setOperateUI</span><span class="token punctuation">(</span><span class="token keyword">false</span><span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre><code>    info.version = LuaInterface:getCltVersion()
    info.apiid = LuaInterface:getApiId()
</code></pre></div><h3 id="账号管理"><a href="#账号管理" class="header-anchor">#</a> 账号管理</h3> <h6 id="取昵称"><a href="#取昵称" class="header-anchor">#</a> 取昵称</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">getNickName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="获取账号uin"><a href="#获取账号uin" class="header-anchor">#</a> 获取账号uin</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">getUin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="取当前世界描述"><a href="#取当前世界描述" class="header-anchor">#</a> 取当前世界描述</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">getCurWorldDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="取当前世界id"><a href="#取当前世界id" class="header-anchor">#</a> 取当前世界ID</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">getCurWorldId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="取地图路径"><a href="#取地图路径" class="header-anchor">#</a> 取地图路径</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">getMapPath</span><span class="token punctuation">(</span>AccountManager<span class="token punctuation">:</span><span class="token function">getCurWorldId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="设置当前世界名称"><a href="#设置当前世界名称" class="header-anchor">#</a> 设置当前世界名称</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">setCurWorldName</span><span class="token punctuation">(</span>worldName<span class="token punctuation">)</span>
</code></pre></div><h6 id="取账号数据"><a href="#取账号数据" class="header-anchor">#</a> 取账号数据</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">getAccountData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
AccountManager<span class="token punctuation">:</span><span class="token function">getAccountData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">getMiniBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">--取迷你豆</span>
AccountManager<span class="token punctuation">:</span><span class="token function">getAccountData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">getVipInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">--VIp</span>
AccountManager<span class="token punctuation">:</span><span class="token function">getAccountData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">getMiniCoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
AccountManager<span class="token punctuation">:</span><span class="token function">getAccountData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">getAccountItemNum</span><span class="token punctuation">(</span>costId<span class="token punctuation">)</span>
AccountManager<span class="token punctuation">:</span><span class="token function">getAccountData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">getBagSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
AccountManager<span class="token punctuation">:</span><span class="token function">getAccountData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">isItemUnlock</span><span class="token punctuation">(</span>itemDef<span class="token punctuation">.</span>UnlockFlag<span class="token punctuation">)</span>

</code></pre></div><h6 id="身份证验证"><a href="#身份证验证" class="header-anchor">#</a> 身份证验证</h6> <div class="language- extra-class"><pre class="language-text"><code>AccountManager:idcard_auth('370104198002273311', '宋林')
</code></pre></div><h6 id="身份证信息"><a href="#身份证信息" class="header-anchor">#</a> 身份证信息</h6> <div class="language- extra-class"><pre class="language-text"><code>AccountManager:idcard_info()
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>AccountManager:data_update()
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>AccountManager:getmmsum()  --25cfde8f698c339870778e3fa02d793a111589253639
</code></pre></div><h6 id="获取当前owid"><a href="#获取当前owid" class="header-anchor">#</a> 获取当前owid</h6> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">--该方法被封装到ScriptSupportCtrl:getCurOwid()</span>
<span class="token comment">--AccountManager:getCurWorldDesc().wdesc.worldid</span>
</code></pre></div><h6 id="开发者信息"><a href="#开发者信息" class="header-anchor">#</a> 开发者信息</h6> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token keyword">local</span> test_developer_info <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">--{{{</span>
    <span class="token keyword">local</span> code<span class="token punctuation">,</span> info<span class="token punctuation">,</span> cfg <span class="token operator">=</span> AccountManager<span class="token punctuation">:</span><span class="token function">dev_developer_info</span><span class="token punctuation">(</span>AccountManager<span class="token punctuation">:</span><span class="token function">getUin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">' 开发者信息 '</span><span class="token punctuation">,</span> code<span class="token punctuation">,</span> info<span class="token punctuation">,</span> cfg<span class="token punctuation">)</span>
    <span class="token comment">--local Uin = 204849422</span>
    <span class="token comment">--local code, info, cfg = AccountManager:dev_developer_info(Uin)</span>
    <span class="token comment">--print(' 开发者信息 ', ErrorCode[code], info, cfg)</span>
    <span class="token comment">--}}}</span>
<span class="token keyword">end</span> 
</code></pre></div><h6 id="向账号添加物品"><a href="#向账号添加物品" class="header-anchor">#</a> 向账号添加物品</h6> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div><h6 id="绑定密码"><a href="#绑定密码" class="header-anchor">#</a> 绑定密码</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>
</code></pre></div><h6 id="修改密码"><a href="#修改密码" class="header-anchor">#</a> 修改密码</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>
</code></pre></div><h6 id="绑定手机"><a href="#绑定手机" class="header-anchor">#</a> 绑定手机</h6> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div><h6 id="社会化登录相关"><a href="#社会化登录相关" class="header-anchor">#</a> 社会化登录相关</h6> <div class="language- extra-class"><pre class="language-text"><code>



</code></pre></div><h6 id="使用某个角色"><a href="#使用某个角色" class="header-anchor">#</a> 使用某个角色</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">useRoleModel</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token keyword">true</span>  <span class="token comment">--使用 卡卡</span>
AccountManager<span class="token punctuation">:</span><span class="token function">useRoleModel</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token keyword">true</span> <span class="token comment">-- 使用 妮妮</span>
</code></pre></div><h6 id="已登录"><a href="#已登录" class="header-anchor">#</a> 已登录？</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="取生存时间"><a href="#取生存时间" class="header-anchor">#</a> 取生存时间</h6> <div class="language- extra-class"><pre class="language-text"><code>AccountManager:getSvrTime()
</code></pre></div><h6 id="取多人玩家数"><a href="#取多人玩家数" class="header-anchor">#</a> 取多人玩家数</h6> <div class="language- extra-class"><pre class="language-text"><code>AccountManager:getMultiPlayer()
</code></pre></div><h6 id="查找世界描述"><a href="#查找世界描述" class="header-anchor">#</a> 查找世界描述</h6> <div class="language- extra-class"><pre class="language-text"><code>local owid = CurWorld:getOWID();
local desc = AccountManager:findWorldDesc(owid)
</code></pre></div><h6 id="创建房间"><a href="#创建房间" class="header-anchor">#</a> 创建房间</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>AccountManager<span class="token punctuation">:</span><span class="token function">createRoom</span><span class="token punctuation">(</span>worldInfo<span class="token punctuation">.</span>worldtype<span class="token punctuation">,</span> worldInfo<span class="token punctuation">.</span>worldname<span class="token punctuation">,</span> playernum<span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token string">'#G测试阶段，遇到问题可在设置界面反馈.(本图由迷你号:'</span><span class="token operator">..</span>worldInfo<span class="token punctuation">.</span>realowneruin<span class="token operator">..</span><span class="token string">'上传分享)'</span><span class="token punctuation">,</span> text<span class="token punctuation">,</span> creattype<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="ban物品"><a href="#ban物品" class="header-anchor">#</a> ban物品</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>PermitsMgr<span class="token punctuation">:</span><span class="token function">banItem</span><span class="token punctuation">(</span>g_DangerItemsForBan<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="账号是否绑定"><a href="#账号是否绑定" class="header-anchor">#</a> 账号是否绑定</h6> <div class="language- extra-class"><pre class="language-text"><code>AccountManager:isBindAccount()
</code></pre></div><h3 id="线程池"><a href="#线程池" class="header-anchor">#</a> 线程池</h3> <p>等待</p> <div class="language-lua extra-class"><pre class="language-lua"><code>threadpool<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span>event_id<span class="token punctuation">,</span> timeout<span class="token punctuation">,</span> tick_func<span class="token punctuation">)</span>
<span class="token keyword">local</span> code<span class="token punctuation">,</span> result <span class="token operator">=</span> threadpool<span class="token punctuation">:</span><span class="token function">wait</span><span class="token punctuation">(</span>seq<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span> <span class="token comment">--等待这个事件timeout秒</span>
</code></pre></div><h3 id="脚本支持组件"><a href="#脚本支持组件" class="header-anchor">#</a> 脚本支持组件</h3> <h6 id="文件是否存在"><a href="#文件是否存在" class="header-anchor">#</a> 文件是否存在</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ScriptSupportCtrl<span class="token punctuation">:</span><span class="token function">checkFileExist</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span>

    <span class="token keyword">if</span> ScriptSupportCtrl<span class="token punctuation">:</span><span class="token function">checkFileExist</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span> <span class="token keyword">then</span>
                ScriptSupportCtrl<span class="token punctuation">:</span><span class="token function">delFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span>
    <span class="token keyword">end</span>
</code></pre></div><h6 id="删除文件"><a href="#删除文件" class="header-anchor">#</a> 删除文件</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ScriptSupportCtrl<span class="token punctuation">:</span><span class="token function">delFile</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span>
</code></pre></div><h6 id="创建目录"><a href="#创建目录" class="header-anchor">#</a> 创建目录</h6> <div class="language- extra-class"><pre class="language-text"><code>ScriptSupportCtrl:createDirectory(dirpath)
</code></pre></div><h6 id="取当前owid"><a href="#取当前owid" class="header-anchor">#</a> 取当前owid</h6> <div class="language- extra-class"><pre class="language-text"><code>ScriptSupportCtrl:getCurOwid()
</code></pre></div><h6 id="检查目录是否存在"><a href="#检查目录是否存在" class="header-anchor">#</a> 检查目录是否存在</h6> <div class="language- extra-class"><pre class="language-text"><code>ScriptSupportCtrl:checkDirectoryExist(dirpath)
</code></pre></div><h6 id="取调试标识"><a href="#取调试标识" class="header-anchor">#</a> 取调试标识</h6> <div class="language- extra-class"><pre class="language-text"><code>ScriptSupportCtrl:getDebugFlag()
</code></pre></div><h6 id="获取迷你号-地图作者"><a href="#获取迷你号-地图作者" class="header-anchor">#</a> 获取迷你号(地图作者)</h6> <p>封装的AccountManager:getCurWorldDesc().realowneruin</p> <div class="language- extra-class"><pre class="language-text"><code>ScriptSupportCtrl:getMini()
</code></pre></div><h5 id="加密反加密"><a href="#加密反加密" class="header-anchor">#</a> 加密反加密</h5> <p>盲猜调用的这个库https://github.com/xxtea/xxtea-lua</p> <h6 id="获取加密标志"><a href="#获取加密标志" class="header-anchor">#</a> 获取加密标志</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ScriptSupportCtrl<span class="token punctuation">:</span><span class="token function">getEncryptionFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="加密"><a href="#加密" class="header-anchor">#</a> 加密</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ScriptSupportCtrl<span class="token punctuation">:</span><span class="token function">encrypt</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
</code></pre></div><h6 id="解码"><a href="#解码" class="header-anchor">#</a> 解码</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>ScriptSupportCtrl<span class="token punctuation">:</span><span class="token function">decrypt</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
</code></pre></div><h3 id="模组管理"><a href="#模组管理" class="header-anchor">#</a> 模组管理</h3> <h6 id="取地图模组数量"><a href="#取地图模组数量" class="header-anchor">#</a> 取地图模组数量</h6> <div class="language- extra-class"><pre class="language-text"><code>ModMgr:getMapModCount()
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code>        <span class="token keyword">if</span> ModMgr <span class="token keyword">then</span>
            <span class="token keyword">local</span> modCount <span class="token operator">=</span> ModMgr<span class="token punctuation">:</span><span class="token function">getMapModCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> idx <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> modCount <span class="token keyword">do</span>
                <span class="token keyword">local</span> moddesc <span class="token operator">=</span> ModMgr<span class="token punctuation">:</span><span class="token function">getMapModDescByIndex</span><span class="token punctuation">(</span>idx<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> moddesc <span class="token keyword">then</span>
                    srcdir <span class="token operator">=</span> moddesc<span class="token punctuation">.</span>rootDir <span class="token operator">..</span> <span class="token string">&quot;/ss/trigger&quot;</span>
                    dstdir <span class="token operator">=</span> param2 <span class="token operator">..</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">..</span> moddesc<span class="token punctuation">.</span>uuid <span class="token operator">..</span> <span class="token string">&quot;/ss/trigger&quot;</span>
                    <span class="token function">SSGMCommand_Export</span><span class="token punctuation">(</span>srcdir<span class="token punctuation">,</span> dstdir<span class="token punctuation">)</span>
                <span class="token keyword">end</span>
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
</code></pre></div><h3 id="lua接口"><a href="#lua接口" class="header-anchor">#</a> Lua接口</h3> <div class="language- extra-class"><pre class="language-text"><code>LuaInterface:getApiId()
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>LuaInterface:getCltVersion()
</code></pre></div><h6 id="是否pc"><a href="#是否pc" class="header-anchor">#</a> 是否PC</h6> <div class="language- extra-class"><pre class="language-text"><code>LuaInterface:ispc()
</code></pre></div><h6 id="取工作取路径"><a href="#取工作取路径" class="header-anchor">#</a> 取工作取路径</h6> <div class="language- extra-class"><pre class="language-text"><code>LuaInterface:getStdioRoot()
</code></pre></div><h6 id="取uin"><a href="#取uin" class="header-anchor">#</a> 取UIN</h6> <div class="language- extra-class"><pre class="language-text"><code>LuaInterface:getUin()
</code></pre></div><h6 id="取密码"><a href="#取密码" class="header-anchor">#</a> 取密码</h6> <div class="language- extra-class"><pre class="language-text"><code>LuaInterface:getPasswd()
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>LuaInterface:getOpenString()
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>LuaInterface:getAccountName()
</code></pre></div><h6 id="取地址"><a href="#取地址" class="header-anchor">#</a> 取地址</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>LuaInterface<span class="token punctuation">:</span><span class="token function">geturl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">--http://wskacchm.mini1.cn:4000/</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>ns_http.func.rpc_string_raw(url,response_callback);

ns_http.func.rpc_string_raw_https( &quot;https://www.sogou.com/&quot;, cb_, nil, true, postData, https_header )
</code></pre></div><div class="language- extra-class"><pre><code>        Longitude = LuaInterface:getLongtitude(),
        Latitude = LuaInterface:getLantitude(),
        CltVersion = LuaInterface:getCltVersion(),
        CltType = LuaInterface:getCltTye(),
</code></pre></div><h3 id="界面"><a href="#界面" class="header-anchor">#</a> 界面</h3> <h6 id="打开微缩打包界面"><a href="#打开微缩打包界面" class="header-anchor">#</a> 打开微缩打包界面</h6> <div class="language- extra-class"><pre><code>local param = {disableOperateUI = true};
GetInst(&quot;UIManager&quot;):Open(&quot;PackingCM&quot;, param);
</code></pre></div><h6 id="信息框"><a href="#信息框" class="header-anchor">#</a> 信息框</h6> <div class="language-lua extra-class"><pre class="language-lua"><code>  MessageBoxFrame2<span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;#Y标题&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#K测试#R测试\n[Test]&quot;</span><span class="token punctuation">)</span>
  ClientCurGame<span class="token punctuation">:</span><span class="token function">sendChat</span><span class="token punctuation">(</span><span class="token string">&quot;测试完毕&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="玩家"><a href="#玩家" class="header-anchor">#</a> 玩家</h3> <h6 id="强制打开某工作台"><a href="#强制打开某工作台" class="header-anchor">#</a> 强制打开某工作台</h6> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">--itemid 为固定参数 WOKESTAGE-&gt; 800  824 833  工具箱  修理台 附魔台</span>
player<span class="token punctuation">:</span><span class="token function">forceOpenBoxUI</span><span class="token punctuation">(</span>itemid<span class="token punctuation">)</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>function BF_InitItemToContainer()
	local num = BF_Data.getAllStuffNum();
	if num&lt;1 then return end

	local grid_index ;
	for i =1, num do 
		grid_index = BUILDBLUEPRINT_START_INDEX+i -1;
		local gridInfo = BF_Data.getOriginalGridInfo(i);
		if gridInfo ~= nil then
			local grid = CurMainPlayer:getBackPack():index2Grid(grid_index);
			if grid~= nil and grid:getNum()&lt;1 then
				CurMainPlayer:setItem(gridInfo.itemId,0, gridInfo.durable);
				for i=1, gridInfo.enchantnum do
					CurMainPlayer:getBackPack():enchant(grid_index, gridInfo.enchants[i]);
				end
			end
		end
	end
end
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/MiniWorldDirectoryStructure.html" class="prev">
        MiniWorld存档目录结构
      </a></span> <span class="next"><a href="/Blog/AboutAntiCheat.html">
        MiniWorld AntiCheatServer BinReverse Research by Hcat
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ef735673.js" defer></script><script src="/assets/js/2.b51029ec.js" defer></script><script src="/assets/js/22.1d33cf5f.js" defer></script>
  </body>
</html>
